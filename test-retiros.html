<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOULIN V8.7 - Sistema</title>
    
    <link rel="stylesheet" href="estilos-moulin.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <datalist id="lista_clientes"></datalist>

    <nav class="nav-tabs no-print">
        <button id="btn-guia" class="active" data-tab="tab-guia"> EMITIR GUA</button>
        <button id="btn-retiros" data-tab="tab-retiros"> RETIROS <span id="badge-retiros" class="badge" style="display:none">0</span></button>
        <button id="btn-clientes-tab" data-tab="tab-clientes"> CLIENTES <span id="badge-clientes" class="badge">0</span></button>
    </nav>

    <main id="tab-guia" class="tab-content active no-print">
        <div class="hoja">
            <header class="header-guia" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--azul); margin-bottom: 20px;">
                <h2>MOULIN V8.7</h2>
                <div class="info-guia"><small>N掳 GUA:</small><br><b id="display_guia" class="num-rojo">---</b></div>
            </header>

            <section class="caja grid-2">
                <div id="form-remitente">
                    <b>REMITENTE</b>
                    <input type="text" id="r_n" list="lista_clientes" placeholder="Nombre/Empresa">
                    <input type="text" id="r_d" placeholder="Direcci贸n">
                    <input type="text" id="r_l" placeholder="Localidad">
                    <input type="text" id="r_t" placeholder="Tel茅fono">
                    <input type="text" id="r_cbu" placeholder="CBU Remitente">
                </div>
                <div id="form-destinatario">
                    <b>DESTINATARIO</b>
                    <input type="text" id="d_n" list="lista_clientes" placeholder="Nombre/Empresa">
                    <input type="text" id="d_d" placeholder="Direcci贸n">
                    <input type="text" id="d_l" placeholder="Localidad">
                    <input type="text" id="d_t" placeholder="Tel茅fono">
                    <input type="text" id="d_cbu" placeholder="CBU Destinatario">
                </div>
            </section>

            <section class="caja">
                <table class="tabla-items">
                    <thead><tr><th>Cant</th><th>Tipo</th><th>Detalle</th><th>$ Unit</th><th>$ V.Decl</th><th></th></tr></thead>
                    <tbody id="cuerpoItems"></tbody>
                </table>
                <button id="add-item" style="background: var(--azul); color: white; border: none; padding: 8px; border-radius: 5px; cursor: pointer; margin-top: 10px;">+ Agregar Bulto</button>
            </section>

<section class="caja" style="display: flex; flex-wrap: wrap; gap: 15px; align-items: flex-end; padding: 10px;">
    <div style="flex: 1; min-width: 150px;">
        <label style="display:block; font-size: 11px;">Lugar de Pago</label>
        <select id="pago_en" style="width: 100%;">
            <option>PAGO EN ORIGEN</option>
            <option>PAGO EN DESTINO</option>
        </select>
    </div>
    <div style="flex: 1; min-width: 120px;">
        <label style="display:block; font-size: 11px;">Condici贸n</label>
        <select id="condicion" style="width: 100%;">
            <option>CONTADO</option>
            <option>CTA CTE</option>
        </select>
    </div>
    <div style="flex: 0.8; min-width: 100px;">
        <label style="display:block; font-size: 11px;">C/R?</label>
        <select id="cr_activo" style="width: 100%;" onchange="document.getElementById('cr_monto').style.visibility = (this.value=='SI'?'visible':'hidden')">
            <option value="NO">NO</option>
            <option value="SI">SI</option>
        </select>
    </div>
    <div id="monto_container" style="flex: 1; min-width: 130px;">
        <input type="number" id="cr_monto" placeholder="Monto C/R $" style="width: 100%; visibility: hidden; border: 2px solid orange; font-weight: bold;">
    </div>
    <div style="flex: 0.5; min-width: 80px;">
        <label style="display:block; font-size: 11px;">Seguro %</label>
        <input type="number" id="p_seg" value="0.8" step="0.1" style="width: 100%;">
    </div>
</section>
                    <label>Contra Reembolso?</label>
                    <select id="cr_activo" onchange="document.getElementById('cr_monto').style.display = (this.value=='SI'?'block':'none')">
                        <option value="NO">NO</option>
                        <option value="SI">SI</option>
                    </select>
                </div>
                <div>
                    <label>Seguro %</label>
                    <input type="number" id="p_seg" value="0.8" step="0.1">
                </div>
                <div id="monto_container">
                    <input type="number" id="cr_monto" placeholder="Monto Contra Reembolso $" style="display:none; border: 2px solid orange;">
                </div>
            </section>

            <section class="historial-container">
                <h4 style="margin-top: 20px; border-bottom: 1px solid #ccc;">HISTORIAL RECIENTE</h4>
                <table class="tabla-items">
                    <thead><tr><th>Gu铆a</th><th>Fecha</th><th>Destino</th><th>Estado</th><th></th></tr></thead>
                    <tbody id="listaHistorial"></tbody>
                </table>
            </section>
        </div>
    </main>

    <main id="tab-retiros" class="tab-content no-print">
        <div class="hoja">
            <h3>SOLICITUD DE RETIRO</h3>
            <div id="listaRetiros"></div>
        </div>
    </main>

    <main id="tab-clientes" class="tab-content no-print">
        <div class="hoja">
            <h3>BASE DE CLIENTES</h3>
            <div style="overflow-x: auto;">
                <table class="tabla-items">
                    <thead>
                        <tr><th>Nombre</th><th>Direcci贸n</th><th>Localidad</th><th>Estado Cta</th><th>Acci贸n</th></tr>
                    </thead>
                    <tbody id="cuerpoTablaClientes"></tbody>
                </table>
            </div>
        </div>
    </main>

    <footer class="footer-fijo no-print">
        <div id="total_txt" style="font-size: 24px; color: #f6ad55;">TOTAL: $ 0.00</div>
        <button id="btn-emitir" class="btn-emitir">GRABAR E IMPRIMIR</button>
    </footer>

    <script type="module" src="app-main.js"></script>
</body>
</html>




